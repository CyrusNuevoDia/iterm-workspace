#!/usr/bin/env sh

config="$PWD/${1:-".iterm-workspace"}"

if [ -f $config ]; then
  dir=$(dirname $BASH_SOURCE)
  parent=$(dirname $dir)
  $parent/bootstrap-iterm-workspace $config
else
  echo "No config found at $config..."
  echo 'Creating empty config...'
  echo

  tee $config <<-JSON
{
  "tabs": [
    {
      "cd": "/path/to/directory",
      "commands": [
        ["# command split vertically", "# command split vertically"],
        "# comand split horizontally",
        "# comand split horizontally"
      ]
    }
  ]
}
JSON

  echo
  echo 'Done! Edit the .iterm-workspace config file in this directory to your liking.'
fi
